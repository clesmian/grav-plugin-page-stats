name: Page Stats
slug: page-stats
type: plugin
version: 1.2.0
description: Enhaced Analytics for grav
icon: plug
author:
    name: Nuno Costa
    email: info@codehaha.com
homepage: https://github.com/francodacosta/grav-plugin-page-stats
keywords: grav, plugin, analytics, statistics
bugs: https://github.com/francodacosta/grav-plugin-page-stats/issues
docs: https://github.com/francodacosta/grav-plugin-page-stats/blob/master/README.md
license: MIT

dependencies:
    - { name: grav, version: ">=1.6.0" }

form:
    validation: loose
    fields:
        enabled:
            type: toggle
            label: PLUGIN_ADMIN.PLUGIN_STATUS
            highlight: 1
            default: 0
            options:
                1: PLUGIN_ADMIN.ENABLED
                0: PLUGIN_ADMIN.DISABLED
            validate:
                type: bool
        ignore_errors:
            type: toggle
            label: PLUGIN_PAGE_STATS.IGNORE_ERRORS_LABEL
            help: PLUGIN_PAGE_STATS.IGNORE_ERRORS_HELP
            highlight: 1
            default: 0
            options:
                1: PLUGIN_ADMIN.ENABLED
                0: PLUGIN_ADMIN.DISABLED
            validate:
                type: bool
        db:
            type: text
            label: PLUGIN_PAGE_STATS.STATS_DB_LABEL
            help: PLUGIN_PAGE_STATS.STATS_DB_HELP


        section_widgets:
            type: section
            title: PLUGIN_PAGE_STATS.SECTION_WIDGETS
            text: PLUGIN_PAGE_STATS.SECTION_WIDGETS_LABEL
            underline: true
            fields:
                fs1:
                    type: fieldset
                    title: PLUGIN_PAGE_STATS.TOP_USERS_WIDGET
                    collapsed: false      # Initial state of fieldset (see collapsible option)
                    collapsible: true    # Whether one can expand the fieldset or not
                    fields:
                        show_top_users_widget:
                            type: toggle
                            label: PLUGIN_PAGE_STATS.SHOW_TOP_USERS_WIDGET_LABEL
                            help: PLUGIN_PAGE_STATS.SHOW_TOP_USERS_WIDGET_HELP
                            highlight: 1
                            default: 1
                            options:
                                1: PLUGIN_ADMIN.ENABLED
                                0: PLUGIN_ADMIN.DISABLED
                            validate:
                                type: bool
                        cols_top_users_widget:
                            type: select
                            label: PLUGIN_PAGE_STATS.WIDGET_SIZE_LABEL
                            help: PLUGIN_PAGE_STATS.WIDGET_SIZE_HELP
                            default: 4
                            options:
                                1 : 1
                                2 : 2
                                3 : 3
                                4 : 4
                                5 : 5
                                6 : 6
                                7 : 7
                                8 : 8
                                9 : 9
                                10 : 10
                                11 : 11
                                12 : 12
                        limit_top_users_widget:
                            type: number
                            label: PLUGIN_PAGE_STATS.SQL_LIMIT_LABEL
                            help: PLUGIN_PAGE_STATS.SQL_LIMIT_HELP

                fs2:
                    type: fieldset
                    title: PLUGIN_PAGE_STATS.UNIQUE_USERS_WIDGET
                    collapsed: false      # Initial state of fieldset (see collapsible option)
                    collapsible: true    # Whether one can expand the fieldset or not
                    fields:
                        show_unique_users_widget:
                            type: toggle
                            label: PLUGIN_PAGE_STATS.SHOW_UNIQUE_USERS_WIDGET_LABEL
                            help: PLUGIN_PAGE_STATS.SHOW_UNIQUE_USERS_WIDGET_HELP
                            highlight: 1
                            default: 1
                            options:
                                1: PLUGIN_ADMIN.ENABLED
                                0: PLUGIN_ADMIN.DISABLED
                            validate:
                                type: bool
                        cols_unique_users_widget:
                            type: select
                            label: PLUGIN_PAGE_STATS.WIDGET_SIZE_LABEL
                            help: PLUGIN_PAGE_STATS.WIDGET_SIZE_HELP
                            default: 4
                            options:
                                1 : 1
                                2 : 2
                                3 : 3
                                4 : 4
                                5 : 5
                                6 : 6
                                7 : 7
                                8 : 8
                                9 : 9
                                10 : 10
                                11 : 11
                                12 : 12


                fs3:
                    type: fieldset
                    title: PLUGIN_PAGE_STATS.UNIQUE_VISITORS_WIDGET
                    collapsed: false      # Initial state of fieldset (see collapsible option)
                    collapsible: true    # Whether one can expand the fieldset or not
                    fields:
                        show_unique_visitors_widget:
                            type: toggle
                            label: PLUGIN_PAGE_STATS.SHOW_UNIQUE_VISITORS_WIDGET_LABEL
                            help: PLUGIN_PAGE_STATS.SHOW_UNIQUE_VISITORS_WIDGET_HELP
                            highlight: 1
                            default: 1
                            options:
                                1: PLUGIN_ADMIN.ENABLED
                                0: PLUGIN_ADMIN.DISABLED
                            validate:
                                type: bool
                        cols_unique_visitors_widget:
                            type: select
                            label: PLUGIN_PAGE_STATS.WIDGET_SIZE_LABEL
                            help: PLUGIN_PAGE_STATS.WIDGET_SIZE_HELP
                            default: 4
                            options:
                                1 : 1
                                2 : 2
                                3 : 3
                                4 : 4
                                5 : 5
                                6 : 6
                                7 : 7
                                8 : 8
                                9 : 9
                                10 : 10
                                11 : 11
                                12 : 12
                fs4:
                    type: fieldset
                    title: PLUGIN_PAGE_STATS.RECENTLY_VIEWED_PAGES
                    collapsed: false      # Initial state of fieldset (see collapsible option)
                    collapsible: true    # Whether one can expand the fieldset or not
                    fields:
                        show_page_views_widget:
                            type: toggle
                            label: PLUGIN_PAGE_STATS.SHOW_PAGE_VIEWS_WIDGET_LABEL
                            help: PLUGIN_PAGE_STATS.SHOW_PAGE_VIEWS_WIDGET_HELP
                            highlight: 1
                            default: 1
                            options:
                                1: PLUGIN_ADMIN.ENABLED
                                0: PLUGIN_ADMIN.DISABLED
                            validate:
                                type: bool
                        cols_page_views_widget:
                            type: select
                            label: PLUGIN_PAGE_STATS.WIDGET_SIZE_LABEL
                            help: PLUGIN_PAGE_STATS.WIDGET_SIZE_HELP
                            default: 4
                            options:
                                1 : 1
                                2 : 2
                                3 : 3
                                4 : 4
                                5 : 5
                                6 : 6
                                7 : 7
                                8 : 8
                                9 : 9
                                10 : 10
                                11 : 11
                                12 : 12
                fs5:
                    type: fieldset
                    title: PLUGIN_PAGE_STATS.RECENTLY_VIEWED_PAGES
                    collapsed: false      # Initial state of fieldset (see collapsible option)
                    collapsible: true    # Whether one can expand the fieldset or not
                    fields:
                        show_recently_viewed_pages:
                            type: toggle
                            label: PLUGIN_PAGE_STATS.SHOW_RECENTLY_VIEWED_PAGES_LABEL
                            help: PLUGIN_PAGE_STATS.SHOW_RECENTLY_VIEWED_PAGES_HELP
                            highlight: 1
                            default: 1
                            options:
                                1: PLUGIN_ADMIN.ENABLED
                                0: PLUGIN_ADMIN.DISABLED
                            validate:
                                type: bool
                        cols_recently_viewed_pages:
                            type: select
                            label: PLUGIN_PAGE_STATS.WIDGET_SIZE_LABEL
                            help: PLUGIN_PAGE_STATS.WIDGET_SIZE_HELP
                            default: 4
                            options:
                                1 : 1
                                2 : 2
                                3 : 3
                                4 : 4
                                5 : 5
                                6 : 6
                                7 : 7
                                8 : 8
                                9 : 9
                                10 : 10
                                11 : 11
                                12 : 12
                        limit_recently_viewed_pages:
                            type: number
                            label: PLUGIN_PAGE_STATS.SQL_LIMIT_LABEL
                            help: PLUGIN_PAGE_STATS.SQL_LIMIT_HELP

                fs6:
                    type: fieldset
                    title: PLUGIN_PAGE_STATS.TOP_PAGES
                    collapsed: false      # Initial state of fieldset (see collapsible option)
                    collapsible: true    # Whether one can expand the fieldset or not
                    fields:
                        show_top_pages:
                            type: toggle
                            label: PLUGIN_PAGE_STATS.SHOW_TOP_PAGES_LABEL
                            help: PLUGIN_PAGE_STATS.SHOW_TOP_PAGES_HELP
                            highlight: 1
                            default: 1
                            options:
                                1: PLUGIN_ADMIN.ENABLED
                                0: PLUGIN_ADMIN.DISABLED
                            validate:
                                type: bool
                        cols_top_pages:
                            type: select
                            label: PLUGIN_PAGE_STATS.WIDGET_SIZE_LABEL
                            help: PLUGIN_PAGE_STATS.WIDGET_SIZE_HELP
                            default: 4
                            options:
                                1 : 1
                                2 : 2
                                3 : 3
                                4 : 4
                                5 : 5
                                6 : 6
                                7 : 7
                                8 : 8
                                9 : 9
                                10 : 10
                                11 : 11
                                12 : 12
                        limit_top_pages_pages:
                            type: number
                            label: PLUGIN_PAGE_STATS.SQL_LIMIT_LABEL
                            help: PLUGIN_PAGE_STATS.SQL_LIMIT_HELP


        section_behaviour:
            type: section
            title: PLUGIN_PAGE_STATS.SECTION_BEHAVIOUR
            text: PLUGIN_PAGE_STATS.SECTION_BEHAVIOUR_LABEL
            underline: true
            fields:
                log_admin:
                    type: toggle
                    label: PLUGIN_PAGE_STATS.LOG_ADMIN_LABEL
                    help: PLUGIN_PAGE_STATS.LOG_ADMIN_HELP
                    highlight: 0
                    default: 0
                    options:
                        1: PLUGIN_ADMIN.ENABLED
                        0: PLUGIN_ADMIN.DISABLED
                    validate:
                        type: bool
                log_bot:
                    type: toggle
                    label: PLUGIN_PAGE_STATS.LOG_BOT_LABEL
                    help: PLUGIN_PAGE_STATS.LOG_BOT_HELP
                    highlight: 0
                    default: 0
                    options:
                        1: PLUGIN_ADMIN.ENABLED
                        0: PLUGIN_ADMIN.DISABLED
                    validate:
                        type: bool
                ignored_ips:
                    type: list
                    label: PLUGIN_PAGE_STATS.IGNORED_IPS_LABEL
                    help: PLUGIN_PAGE_STATS.IGNORED_IPS_HELP
                    style: vertical
                    fields:
                        .ip:
                            type: text
                            label: PLUGIN_PAGE_STATS.IP
                            help: PLUGIN_PAGE_STATS.IGNORED_IPS_HELP
